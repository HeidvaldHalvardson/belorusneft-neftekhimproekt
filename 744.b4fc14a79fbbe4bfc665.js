"use strict";(self.webpackChunkbelorusneft_neftekhimproekt=self.webpackChunkbelorusneft_neftekhimproekt||[]).push([[744],{3744:(e,r,n)=>{n.r(r),n.d(r,{default:()=>f});var t=n(4848),o=n(6540),a=n(9785),s=n(926),l=n(1248),i=n(9068),c=n(525),u=n(9176),d=n(3811);const p={changeToSignUp:"cId6iZbC",controls:"xrN2xYZc",errorText:"PS9NRPAK"};var m=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;const f=function(e){var r,n=e.onClose,f=void 0===n?function(){}:n,v=e.changeToSignUp,b=void 0===v?function(){}:v,h=(0,s.j)(),x=(0,c.Qv)(),j=x[0],g=x[1],y=g.data,k=g.error,N=null===(r=null==k?void 0:k.data)||void 0===r?void 0:r.error,O=(0,a.mN)({defaultValues:{email:"",password:""}}),w=O.control,S=O.handleSubmit,Z=(0,o.useCallback)((function(e){h(l.I2.setAuthData(e))}),[h]),C=(0,o.useCallback)((function(e){h(i.Xp.setUser(e))}),[h]);return(0,o.useEffect)((function(){if(y&&!N){var e=y.token,r=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n}(y,["token"]);Z(e),C(r),f()}}),[N,f,Z,C,y]),(0,t.jsxs)("form",{className:p.SingInForm,onSubmit:S((function(e){j(e)})),children:[(0,t.jsx)(d.Z,{label:"email",name:"email",control:w,rules:{required:"Email обязателен",pattern:{value:m,message:"Некоректный формат email"}}}),(0,t.jsx)(d.Z,{label:"password",name:"password",type:"password",control:w,rules:{required:"Пароль обязателен",minLength:{value:8,message:"Пароль должен содержать минимум 8 символов"}}}),N&&(0,t.jsx)("span",{className:p.errorText,children:N}),(0,t.jsxs)("div",{className:p.controls,children:[(0,t.jsx)("button",{className:p.changeToSignUp,onClick:b,type:"button",children:"Registration"}),(0,t.jsx)(u.$,{type:"submit",children:"Login"})]})]})}},3811:(e,r,n)=>{n.d(r,{Z:()=>l});var t=n(4848),o=n(9785);const a={FormInput:"Le4MA2Hg",input:"EsYV_0F9",errorBorder:"KnBP8XWj",errorText:"HQdYLVpM"};var s=function(){return s=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},s.apply(this,arguments)},l=function(e){var r=e.className,n=void 0===r?"":r,l=e.label,i=e.control,c=e.name,u=e.rules,d=e.type,p=void 0===d?"text":d;return(0,t.jsxs)("label",{className:"".concat(a.FormInput," ").concat(n),children:[l,(0,t.jsx)(o.xI,{control:i,name:c,rules:u,render:function(e){var r=e.field,n=e.fieldState;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",s({className:a.input,type:p},r)),(null==n?void 0:n.error)&&(0,t.jsxs)("div",{className:a.error,children:[(0,t.jsx)("div",{className:a.errorBorder}),(0,t.jsx)("span",{className:a.errorText,children:n.error.message})]})]})}})]})}}}]);