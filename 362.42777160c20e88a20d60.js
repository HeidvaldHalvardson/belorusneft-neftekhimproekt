"use strict";(self.webpackChunkbelorusneft_neftekhimproekt=self.webpackChunkbelorusneft_neftekhimproekt||[]).push([[362],{362:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var i=t(848),s=t(540),a=t(468),c=t(527),r=t(122),l=t(926),o=t(747),u=t(320),d=t(861),f=t(176),h=t(383);var m=function(e){var n=e.className,t=void 0===n?"":n,s=e.item,a=(0,c.zy)(),r=(0,c.Zp)(),l=new Date(s.snippet.publishedAt),o=(0,d.w)(s.snippet.publishedAt),u=new Intl.DateTimeFormat("ru-RU").format(l);return(0,i.jsxs)("li",{className:"".concat("wE6x08Sy"," ").concat(t),style:{borderBottom:"4px solid ".concat(o)},children:[(0,i.jsx)("img",{className:"x2SvaIhM",src:s.snippet.thumbnails.maxres.url,width:223,height:123,alt:"Изображение ".concat(s.snippet.title)}),(0,i.jsx)(h.K,{className:"jWm3TrOJ",statistics:s.statistics}),(0,i.jsx)("h3",{className:"_8MKRG7g",children:s.snippet.title}),(0,i.jsx)("span",{className:"nq2WhcTc",children:u}),(0,i.jsx)(f.$,{className:"vSXW5nRJ",onClick:function(){r("/videos/".concat(s.id),{state:{from:a}})},children:"Далее..."})]})};var v=function(e){var n=e.className,t=void 0===n?"":n,s=e.items;return(0,i.jsx)("ul",{className:"".concat("W4K5Xncn"," ").concat(t),children:s.map((function(e){return(0,i.jsx)(m,{item:e},e.id)}))})},p=t(961),x=function(e){var n=e.children,t=e.element,i=void 0===t?document.body:t;return(0,p.createPortal)(n,i)};var g=function(e){var n=e.children,t=e.className,a=void 0===t?"":t,c=e.title,r=void 0===c?"":c,l=e.isOpen,o=void 0!==l&&l,u=e.onClose,d=(0,s.useState)(!1),f=d[0],h=d[1],m=(0,s.useRef)(null),v=(0,s.useCallback)((function(){u&&(h(!0),m.current=setTimeout((function(){u(),h(!1)}),250))}),[u]),p=(0,s.useCallback)((function(e){"Escape"===e.key&&v()}),[v]);return(0,s.useEffect)((function(){return o&&window.addEventListener("keydown",p),function(){window.removeEventListener("keydown",p),clearTimeout(m.current)}}),[o,p]),o?(0,i.jsx)(x,{children:(0,i.jsx)("div",{className:"".concat("ESw4g_qu"," \n                ").concat(a," \n                ").concat(o?"RuLiugLP":""," \n                ").concat(f?"GChBKII9":""),children:(0,i.jsx)("div",{className:"OTlZW4pf",onClick:v,children:(0,i.jsxs)("div",{className:"NxhSG1qz",onClick:function(e){e.stopPropagation()},children:[(0,i.jsx)("h3",{className:"b_IjUd1A",children:r}),n]})})})}):null};var j=function(e){var n=e.className,t=void 0===n?"":n,s=e.total,a=void 0===s?0:s,c=e.current,r=void 0===c?1:c,l=e.pageSize,o=void 0===l?12:l,u=e.onChangePage,d=void 0===u?function(){}:u,f=e.onChangeSize,h=void 0===f?function(){}:f,m=Math.ceil(a/o),v=1===r?null:r-1,p=r===m?null:r+1,x=function(){var e=[];if(1===m)return[1];e.push(1),v&&v>2&&e.push(null);for(var n=Math.max(2,v);n<=Math.min(m-1,p);n++)e.push(n);return p&&p<m-1&&e.push(null),r===m&&m>2&&e.push(m-1),m>1&&e.push(m),e}();return(0,i.jsxs)("div",{className:"".concat("E07wxAz8"," ").concat(t),children:[(0,i.jsx)("ul",{className:"zs80e4P6",children:x.map((function(e){return e?(0,i.jsx)("li",{className:"".concat("X3Z18Kgz"," ").concat(e===r?"TkuHKfgV":""),onClick:function(){return d(e)},children:e},e):(0,i.jsx)("li",{className:"ZGw1NPrF",children:"..."},e)}))}),(0,i.jsx)("select",{className:"kc1hON8q",value:o,onChange:function(e){var n=+e.target.value;h(n),d(1)},children:[12,20,32,56].map((function(e){return(0,i.jsxs)("option",{value:e,children:[e," / page"]},e)}))})]})};const k=function(){var e=(0,l.j)(),n=(0,c.zy)(),t=(0,c.ok)(),d=t[0],f=t[1],h=(0,a.d4)(o.vA),m=h.page,p=h.limit,x=h.sort,k=h.filter,C=(0,r.b)().filter,N=(0,u.k)({page:m,limit:p,sort:x,filter:k}),w=N.data,b=N.error,E=N.isLoading,S=(0,s.useCallback)((function(n){e(o.uE.setPage(n))}),[e]),z=(0,s.useCallback)((function(n){e(o.uE.setLimit(n))}),[e]),L=(0,s.useCallback)((function(n){e(o.uE.setSort(n))}),[e]),y=(0,s.useCallback)((function(n){e(o.uE.setFilter(n))}),[e]);(0,s.useEffect)((function(){var e=d.get("page"),n=d.get("limit"),t=d.get("sort"),i=d.get("filter");e&&S(+e),n&&z(+n),t&&L(t),i&&y(i)}),[n.search,e,d,S,z,L,y]);var P=(0,s.useMemo)((function(){return C?null==w?void 0:w.items.filter((function(e){return e.snippet.title.toLowerCase().includes(C.toLowerCase())})):null==w?void 0:w.items}),[C,w]),T=(0,s.useState)(!1),I=T[0],K=T[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g,{isOpen:I,title:"Create new card",onClose:function(){return K(!1)}}),(0,i.jsx)("button",{onClick:function(){return K(!0)},children:"open modal"}),E&&(0,i.jsx)("div",{children:"Loading..."}),b&&(0,i.jsx)("div",{children:"Что-то пошло не так..."}),P&&P.length>0?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(v,{items:P})}):(0,i.jsx)("div",{children:"Ничего не найдено"}),(0,i.jsx)(j,{total:null==w?void 0:w.pageInfo.totalResults,current:m,onChangePage:function(e){f((function(n){return n.set("page","".concat(e)),n}))},onChangeSize:function(e){f((function(n){return n.set("limit","".concat(e)),n}))},pageSize:p})]})}}}]);